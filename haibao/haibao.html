<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./haibao.css">
</head>

<body>
    <section class="card">
        <div class="bg"></div>
        <img src="https://www.17sucai.com/preview/1/2015-11-12/201509181601/img/effect-2/5.png" alt="" />
        <div class="shine"></div>
    </section>
    <script>
        var card = document.querySelector(".card");
        var bg = card.querySelector(".bg");
        var imgs = card.querySelectorAll("img");
        var shine = card.querySelector(".shine");
        var w = window.innerWidth;
        var h = window.innerHeight;

        document.body.onmousemove = function(event) {
            var mouse = {
                x: event.clientX,
                y: event.clientY
            };

            bg.style.transform =
                "rotateX(" +
                (-2 / (h / 2)) * (h / 2 - mouse.y) +
                "deg) rotateY(" +
                (2 / (w / 2)) * (w / 2 - mouse.x) +
                "deg)";
            shine.style.transform =
                "rotateX(" +
                (-2 / (h / 2)) * (h / 2 - mouse.y) +
                "deg) rotateY(" +
                (2 / (w / 2)) * (w / 2 - mouse.x) +
                "deg)";

            imgs.forEach(function(item) {
                item.style.transform =
                    "translate(" + (3 / (w / 2)) * (w / 2 - mouse.x) + "px, " + (3 / (h / 2)) * (h / 2 - mouse.y) + "px)";
            });
            var deg = (Math.atan((mouse.y - h / 2) / (mouse.x - w / 2)) * 180) / Math.PI;

            // 判断象限
            var cx = mouse.x - w / 2;
            var cy = mouse.y - h / 2;
            if (cx > 0) {
                // 第一二象限
                deg = deg + 90;
            } else {
                // 第三四象限
                deg = deg + 270;
            }
            // 每个象限都多加 90度 让0度上下
            // console.log(deg);

            shine.style.backgroundImage = "linear-gradient(" + deg + "deg, transparent, rgba(255, 255, 255, 0.3))";
        }
    </script>
</body>

</html>